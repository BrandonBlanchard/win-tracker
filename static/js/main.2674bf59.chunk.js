(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{103:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(9),c=t.n(o),i=(t(38),t(24)),l=t(25),s=t(30),u=t(26),m=t(31),d=t(11),p=(t(45),t(46),function(e,a){var t=e.split("\n"),n=t.shift().split(",");a(t.map(function(e){return e.split(",").reduce(function(e,a,t){return e[n[t].toLowerCase()]=a,e},{})}))}),f=(t(49),t(50),function(){return r.a.createElement("div",{className:"welcome-mat"},r.a.createElement("h1",{className:"welcome-mat__header-1"},"Turn  ",r.a.createElement("br",null)," Two "),r.a.createElement("h1",{className:"welcome-mat__header-2"},"Smoke ",r.a.createElement("br",null)," Break"))}),h=Object.freeze({DATA_LOAD:"DATA_LOAD"}),b=t(20),w=(t(51),function(e){return r.a.createElement("div",{className:"chart-card"},r.a.createElement("div",{className:"chart-card__content"},r.a.createElement("h3",{className:"chart-card__name"},e.chartName),e.children))}),y=t(32),v=t(29),g=t.n(v),E=(t(55),function(e){return r.a.createElement("div",{className:"pie-chart",style:{width:e.width,height:e.height}},r.a.createElement(g.a,Object.assign({},e,{configuration:{displayModBar:!1},layout:Object(y.a)({},e.layout,{paper_bgcolor:"rgba(0,0,0,0)",plot_bgcolor:"rgba(0,0,0,0)",width:e.width,height:e.height,grid:{rows:0,columns:0},showlegend:!1})})))}),_=(t(56),function(e,a){var t=e.wins,n=a.wins;return t>n?-1:t<n?1:0}),O=function(e){return e.wins>2&&"Some rando"!=e.player},N={2:"2nd",3:"3rd",4:"4th",5:"5th",6:"6th"},j=function(e){var a=function(e){var a=e.filter(O).sort(_);return{leader:a[0],rabble:a.slice(1,a.length)}}(e.players),t=a.leader,n=a.rabble,o=[{label:"Wins",stat:t.wins},{label:"W/L Ratio",stat:(t.wins/t.games).toFixed(2)},{label:"Games",stat:t.games}];return r.a.createElement("ul",{className:"mini-leaderboard"},r.a.createElement("li",{className:"mini-leaderboard__leader"},r.a.createElement("i",{className:"fa fa-crown mini-leaderboard__leader-crown"}),r.a.createElement("p",{className:"mini-leaderboard__leader-name"},t.player),r.a.createElement("p",{className:"mini-leaderboard__leader-faction"},t.faction),r.a.createElement("div",{className:"mini-leaderboard__leader-stats"},o.map(function(e){return r.a.createElement("div",{className:"mini-leaderboard__leader-stat"},r.a.createElement("p",{className:"leader-stat__label"},e.label),r.a.createElement("p",{className:"leader-stat__value"},e.stat))}))),n.map(function(e,a){var t=e.player,n=e.faction;e.wins,e.games;return r.a.createElement("li",{className:"mini-leaderboard__player"},r.a.createElement("div",{className:"mini-leaderboard__player-dot"}," ",t," "),r.a.createElement("div",{className:"mini-leaderboard__player-faction"},n),r.a.createElement("div",{className:"mini-leaderboard__player-wins"},N[a+2]))}))},A=(t(57),{font:{color:"#728041",family:"sans serif"}}),D=function(e){var a=e.data,t=a.factions,o=a.players,c=Object(n.useState)([]),i=Object(b.a)(c,2),l=i[0],s=i[1],u=Object(n.useState)([]),m=Object(b.a)(u,2),d=m[0],p=m[1];return Object(n.useEffect)(function(){return function(e,a){var t=e.filter(function(e){return e.wins>2});a([{type:"pie",labels:t.map(function(e){return e.faction}),values:t.map(function(e){return e.games}),domain:{column:0},hole:.96,textinfo:"label+value"}])}(t,s)},[t]),Object(n.useEffect)(function(){return function(e,a){var t=e.filter(function(e){return e.games>2&&"Some rando"!==e.player});a([{type:"pie",labels:t.map(function(e){return e.player}),values:t.map(function(e){return e.wins}),domain:{column:1},hole:.96,textinfo:"label+value"}])}(o,p)},[o]),r.a.createElement("div",{className:"meta-stats"},r.a.createElement(w,{chartName:"Faction Games",key:0},r.a.createElement(E,{data:l,layout:A,width:330,height:330})),r.a.createElement(j,{players:o}),r.a.createElement(w,{chartName:"Player Wins",key:0},r.a.createElement(E,{data:d,layout:A,width:330,height:330})))},k={INIT:0,LOADING:1,READY:2},T=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(s.a)(this,Object(u.a)(a).call(this,e))).state={readiness:k.INIT},t}return Object(m.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){var e,a,t=this;this.state.readiness===k.INIT&&((e="https://docs.google.com/spreadsheets/d/e/2PACX-1vQ6B-jLNFVOaHlagYjsClKUDGquAkZpCymnDQ60n5wOw-0pf8gRImDXKciW7FzLZbK4rZutfQjPfVSM/pub?output=csv",a=function(e){t.props.dispatch(function(e){return{type:h.DATA_LOAD,payload:e}}(e))},fetch(e).then(function(e){e.text().then(function(e){return p(e,a)})}).catch(function(e){return console.error("data fetch failed")})).then(function(){t.setState({readiness:k.READY})}),this.setState({readiness:k.LOADING}))}},{key:"renderOnReady",value:function(){return r.a.createElement("div",{className:"charts-container"},r.a.createElement(D,this.props))}},{key:"render",value:function(){return console.log(this.props),r.a.createElement("div",{className:"app"},r.a.createElement(f,null),this.props.data.players.length>0&&this.renderOnReady())}}]),a}(n.Component);T.defaultProps={data:{players:[]}};var L=Object(d.b)(function(e){return e})(T);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var I=t(10),R=t(19),S=t(3),W=t.n(S),x=function(e,a){var t="TRUE"===a.win;return W()(e,a.player)?(e[a.player].games+=1,e[a.player].wins+=t?1:0):e[a.player]={games:1,wins:t?1:0,player:a.player,faction:a.faction},W()(e,a.opponent)?(e[a.opponent].games+=1,e[a.opponent].wins+=t?0:1):e[a.opponent]={games:1,wins:t?0:1,player:a.opponent,faction:a["opponent faction"]},e},B=function(e,a){var t="TRUE"===a.win;return W()(e,a.faction)?(e[a.faction].wins+=t?1:0,e[a.faction].games+=1):e[a.faction]={faction:a.faction,wins:t?1:0,games:1},W()(e,a["opponent faction"])?(e[a["opponent faction"]].wins+=t?0:1,e[a["opponent faction"]].games+=1):e[a["opponent faction"]]={faction:a["opponent faction"],wins:t?0:1,games:1},e},C=function(e,a){return console.log("data load reducer",e,a),{players:Object(R.a)(Object.values(a.payload.reduce(x,{}))),factions:Object(R.a)(Object.values(a.payload.reduce(B,{})))}},G={data:{players:[],factions:[]}},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,a=arguments.length>1?arguments[1]:void 0;return console.log(a,h.DATA_LOAD),{data:a.type===h.DATA_LOAD?Object.assign({},e.data,C(e,a)):Object.assign({},e.data)}},P=Object(I.b)(F);c.a.render(r.a.createElement(d.a,{store:P},r.a.createElement(L,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},33:function(e,a,t){e.exports=t(103)},38:function(e,a,t){},45:function(e,a,t){},50:function(e,a,t){},51:function(e,a,t){},55:function(e,a,t){},56:function(e,a,t){},57:function(e,a,t){}},[[33,1,2]]]);
//# sourceMappingURL=main.2674bf59.chunk.js.map